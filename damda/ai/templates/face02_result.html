{% load static %}
{% block content %}
{% if request.session.emotion01 %}
<p class="host answer" name="posAnswers"></p>
{% else %}
<p class="host answer" name="negAnswers"></p>
{% endif %}

<p class="host">
  지금까지 당신의 이야기를 들려줘서 고마워요!<br>
  마지막으로,<br>
  자신이 생각하는 자신을 그림으로 그려서 담아볼까요?
</p>
<p class="host">
  <span class="d-flex align-items-center">
    <img src="{% static '/img/icon_draw.svg' %}" alt="">
    잠시후, 드로우담이 실행됩니다.<br>
    여러분이 생각하는 것을 자유롭게 담아주세요.
  </span>
</p>
<p class="host">
  <span class="d-flex align-items-center">
    <img src="{% static '/img/icon_draw.svg' %}" alt="">
    드로우담이 진행중입니다.
  </span>
</p>

<script>
  var type = $('.answer').attr('name');
  if (type === 'posAnswers') {
    var ranIndex = Math.floor(Math.random() * posAnswers.length);
    var posAnswers = posAnswers.filter(function (elem, idx) {
      if (idx === ranIndex) {
        $('.answer').text(elem);
        return false;
      } else {
        return true;
      }
    })
  } else {
    var ranIndex = Math.floor(Math.random() * negAnswers.length);
    var negAnswers = negAnswers.filter(function (elem, idx) {
      var elem = elem;

      if (idx === ranIndex) {
        $('.answer').text(elem);
        $('.answer').removeClass('answer');
        return false;
      } else {
        return true;
      }
    })
  }

  $('.article-body').css('background-color', 'rgb({{ request.session.red }},{{ request.session.green }},{{ request.session.blue }})');
  $('.modal').modal('hide');
</script>
{% endblock content %}